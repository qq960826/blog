---
title: 空自习室功能开发
url: 116.html
id: 116
comments: false
categories:
  - isdust
date: 2015-11-24 17:37:05
tags:
---

**一.课表信息的处理**

*   课程结构的分析

1.首先进入正方选课平台,进入公用信息查询->教师课表查询 2.随便找个老师的课表点进去，然后分析课表的格式
[![QQ20151124-0@2x](/images/old/2015/11/QQ20151124-0@2x.png)](/images/old/2015/11/QQ20151124-0@2x.png) 
如图所示 
对于每节课的课表结构为
> 课程名称 
> 上课的周次 
> 老师 
> 教室 
> 上课的班级

在这里我们要收集的信息就有：

> 上课的周次，课程所在的星期，节次，上课的地点

*   课程信息的提取

写程序前先规定一个保存的格式，方便后续的各种操作。这里我规定每门课储存的信息为：\[地点，周次，星期，节次，课程名称，老师\] 
1.周次的提取 
对于上课的周次，正方选课平台的有多种格式
> 1.直接表明第哪一周到哪一周 
> [![屏幕快照 2015-11-24 下午5.27.01](/images/old/2015/11/屏幕快照-2015-11-24-下午5.27.01.png)](/images/old/2015/11/屏幕快照-2015-11-24-下午5.27.01.png) 
> 2.分单双周 
> [![屏幕快照 2015-11-24 下午5.27.57](/images/old/2015/11/屏幕快照-2015-11-24-下午5.27.57.png)](/images/old/2015/11/屏幕快照-2015-11-24-下午5.27.57.png)
> 3.多个区间课程 
> [![屏幕快照 2015-11-24 下午5.30.09](/images/old/2015/11/屏幕快照-2015-11-24-下午5.30.09.png)](/images/old/2015/11/屏幕快照-2015-11-24-下午5.30.09.png) 
> 4.多个区间课程，有的还含单双周 
> [![屏幕快照 2015-11-24 下午5.31.47](/images/old/2015/11/屏幕快照-2015-11-24-下午5.31.47.png)](/images/old/2015/11/屏幕快照-2015-11-24-下午5.31.47.png) 
> 5.单节次课 
> [![屏幕快照 2015-11-24 下午5.33.32](/images/old/2015/11/屏幕快照-2015-11-24-下午5.33.32.png)](/images/old/2015/11/屏幕快照-2015-11-24-下午5.33.32.png) 
> 6.以上各种类型的排列组合

为了查询时的高效，我就写了一个python解析脚本，将正方的周次信息处理成具体哪一周的信息。
> 如：10-15就处理成10,11,12,13,14,15

以下是我写的周次处理的python脚本的源码
```python
def qudequjian(min,max,condition):#计算区间
    delta=max-min
    result=[]
    for i in range(delta+1):
        if(condition==0):
            result.append(min+i)
            continue
        if(condition==1):
            if((min+i)%2==1):
                result.append(min+i)
                continue
        if(condition==2):
            if((min+i)%2==0):
                result.append(min+i)
                continue
    return result


def zuizhongqujian(text):#直接算区间
    print(text)
    result=[]
    if(text.find("周")<=0):
        text_pre=text[:text.find("(")]
        if(text_pre.find(",")>0):
            text_split1=text_pre.split(",")
            for i in range(len(text_split1)):
                if text_split1[i].find("-")>0:
                    text_split2=text_split1[i].split("-")
                    if(text_split2[1].find("单")>0 or text_split2[1].find("双")>0):
                        text_split2[1]=text_split2[1][:len(text_split2[1])-1]
                    min=int(text_split2[0])
                    max=int(text_split2[1])
                    if(text_split1[i].find("单")>0):
                        result=result+qudequjian(min,max,1)
                    elif (text_split1[i].find("双")>0):
                        result=result+qudequjian(min,max,2)
                    else:result=result+qudequjian(min,max,0)
                else:
                    min=max=int(text_split1[i])
                    result=result+qudequjian(min,max,0)
        else:
                if text_pre.find("-")>0:
                    text_split2=text_pre.split("-")
                    if(text_split2[1].find("单")>0 or text_split2[1].find("双")>0):
                        text_split2[1]=text_split2[1][:len(text_split2[1])-1]
                    min=int(text_split2[0])
                    max=int(text_split2[1])
                    if(text_pre.find("单")>0):
                        result=result+qudequjian(min,max,1)
                    elif (text_pre.find("双")>0):
                        result=result+qudequjian(min,max,2)
                    else:result=result+qudequjian(min,max,0)

                else:
                    min=max=int(text_pre)
                    result=result+qudequjian(min,max,0)
    else:
        text_pre=text[text.find("周")+2:len(text)-1]
        text_split2=text_pre.split("-")
        min=int(text_split2[0])
        max=int(text_split2[1])
        if(text_pre.find("单")>0):
            result=result+qudequjian(min,max,1)
        elif (text_pre.find("双")>0):
            result=result+qudequjian(min,max,2)
        else:result=result+qudequjian(min,max,0)
    return result
```


2.星期的获取
[![屏幕快照 2015-11-24 下午5.52.17](/images/old/2015/11/屏幕快照-2015-11-24-下午5.52.17.png)](/images/old/2015/11/屏幕快照-2015-11-24-下午5.52.17.png) 
如图所示 
没有课的标签内的内容均为&nbsp; 于是在这里我们可以写一个正则表达式（1.可以获取具体课程信息，2.获取出该课程所在星期）
```
 >第[1,3,5,7,9]节[\S\s]*?<td align="Center">([\S\s]*?)</td><td align="Center">([\S\s]*?)</td><td align="Center">([\S\s]*?)</td><td align="Center">([\S\s]*?)</td><td align="Center">([\S\s]*?)</td><td align="Center">([\S\s]*?)</td><td align="Center">([\S\s]*?)</td>
```
3.地点，节次，老师，课程名称的获取 
直接从上面写的正则表达式中的文本进行提取
以下是提取部分的源码
```python
def kechengchuli(text,y,z):
    result=[]
    text_split=text.split("<br>")
    result.append(text_split[3])#教室编号
    result.append(zuizhongqujian(text_split[1]))
    result.append(y)
    result.append(z)
    result.append(text_split[0])#科目
    result.append(text_split[2])#老师
    result.append(text_split[4])#学生要上的课
    if(text.find("调课")>0):
        result.append(text_split[5][1:text_split[5].find(")")])
    else:result.append("")
    return result
#qudequjian(16,16,2)
 
 
def chuli(text):
    shuju=[]
    content=text
    content=content.replace(' rowspan="2"',"")
    content=content.replace("<br><font color='red'>","")
    content=content.replace("</font>","")
    content=content.replace("<font color='blue'>","")
    content=content.replace("</font>","")
    a=re_kebiao.findall(content)
    for i in range(5):#i+1为课时计数，对应原稿里面的z，一天10节课，但是由于2节课在一起，所以10/2=5
        for j in range(7):#一个星期7天，j+1为星期计数，对应原稿里面的y
            if(a[i][j]!="&nbsp;"):
                if(a[i][j].find("<br><br>")>0):
                    b=a[i][j].split("<br><br>")
                    shuju.append(kechengchuli(b[0],j+1,i+1))
                    shuju.append(kechengchuli(b[1],j+1,i+1))
                    #print(a[i][j])
                else:shuju.append(kechengchuli(a[i][j],j+1,i+1))
    return shuju
 
 
        #print("")
        #print(a[i][j])
    #print(a[i])
print(chuli(content))
```

最后对单个老师的课表得到的数据如下

```python
[['J1-420室', [7, 9, 10, 11, 12, 15], 2, 1, '计算机组成原理', '于建志', '数字媒体技术2012', '换地点0199'], ['J7-407室', [1, 2, 3, 4, 5, 6, 16, 17, 18, 20, 21], 2, 1, '计算机组成原理', '于建志', '数字媒体技术2012', '换地点0199'], ['J5-501室', [19], 3, 1, '数字逻辑与计算机组成原理', '于建志', '信息与计算科学2012', ''], ['J7-114室', [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15], 6, 1, '汇编语言与微机接口技术', '于建志', ' ', ''], ['J5-509室', [1, 2, 3, 4, 5, 6, 16, 17, 18, 19, 20, 21], 4, 2, '计算机组成原理', '于建志', '数字媒体技术2012', '换地点0201'], ['J1-420室', [7, 8, 9, 10, 11, 12], 4, 2, '计算机组成原理', '于建志', '数字媒体技术2012', '换地点0201'], ['J7-310室', [4, 6, 8, 10, 14, 16, 18, 20], 5, 2, '数字逻辑与计算机组成原理', '于建志', '信息与计算科学2012', ''], ['J7-114室', [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15], 6, 2, '汇编语言与微机接口技术', '于建志', ' ', ''], ['J7-310室', [4, 5, 6, 7, 8, 9, 10, 13, 14, 15, 16, 17, 18, 19, 20, 21], 1, 5, '数字逻辑与计算机组成原理', '于建志', '信息与计算科学2012', ''], ['J7-407室', [19], 2, 5, '计算机组成原理', '于建志', '数字媒体技术2012', ''], ['J7-310室', [4, 5, 6, 7, 8, 9, 10, 13, 14, 15, 16, 17, 18, 20, 21], 3, 5, '数字逻辑与计算机组成原理', '于建志', '信息与计算科学2012', '调课0831']]
```

*   正方课程表信息的爬取

1.正方教务系统的登录 
通过抓包，分析正方的登录接口进行免验证码登录；
登录代码

```python
    def login(self,user,password):
        self.user=user
        self.password=password
        text_web=s.get("http://192.168.100.136/default_ysdx.aspx").text
        VIEWSTATE=quwenbenzhongjian(text_web,'name="__VIEWSTATE" value="','" />')
        submit_post={"__VIEWSTATE":VIEWSTATE,"TextBox1":self.user,"TextBox2":self.password,"RadioButtonList1":"%D1%A7%C9%FA","RadioButtonList1":"%D1%A7%C9%FA","Button1":"++%B5%C7%C2%BC++"}
        b=s.post("http://192.168.100.136/default_ysdx.aspx",submit_post)
        a=s.post("http://192.168.100.136/default_ysdx.aspx",submit_post).text
        a=s.get("http://192.168.100.136/xs_main.aspx?xh="+user).text

        if(a.find("欢迎您")>0):
            self.name=quwenbenzhongjian(a,'<span id="xhxm">','同学</span></em>')
            self.name="%CD%F5%E8%F7%E9%C9"
            submit_post={"xh":"201501060225","xm":self.name,"gnmkdm":"N123111"}
            headers={'Referer':"http://192.168.100.136/xs_main.aspx?xh=201501060225"}

            html=s.post("http://192.168.100.136/jstjkbcx.aspx?xh="+self.user+"&xm="+self.name+"&gnmkdm=N123111",submit_post,headers=headers).text
            html=html.replace('selected="selected" ',"")
            temp=quwenbenzhongjian(html,'<input type="hidden" name="__VIEWSTATE" value="','" />')
            self.__VIEWSTATE=temp
            self.xueyuan=re_xueyuan.findall(html)
            return "登录成功"
        return "登录失败"
```

2.获取所有学院的名称 
登录时已经得到学院的名字 
3.获取学院所以老师的名称，以获取每个老师的课表
```python
def chaxun(self,\_\_EVENTTARGET,\_\_EVENTARGUMENT,xn,xq,bm,TextBox1,Button2,js,headers):
    submit\_post={"\_\_EVENTTARGET":\_\_EVENTTARGET,"\_\_EVENTARGUMENT":\_\_EVENTARGUMENT,"\_\_VIEWSTATE":self.__VIEWSTATE,"xn":xn,"xq":xq,"bm":bm,"TextBox1":TextBox1,"Button2":Button2,"js":js}
    html=s.post("http://192.168.100.136/jstjkbcx.aspx?xh="+self.user+"&xm="+self.name+"&gnmkdm=N123111",submit_post,headers=headers).text
    html=html.replace('selected="selected" ',"")
    return html
def chaxunxueyuan(self,xueyuan):

    html=self.chaxun("bm","","2015-2016","1",xueyuan,"","","030000451",{'Referer':"http://192.168.100.136/jstjkbcx.aspx?xh=201501060225&xm=%CD%F5%E8%F7%E9%C9&gnmkdm=N123111"})
    bianhao=re_jiaoshibianhao.findall(html)
    result=\[\]
    result_final=\[\]
    for i in range(len(bianhao)):
        result=self.chaxun("","","2015-2016","1",xueyuan,bianhao\[i\],"查询教师".encode('gb2312'),bianhao\[i\],{'Referer':"http://192.168.100.136/jstjkbcx.aspx?xh=201501060225&xm=%CD%F5%E8%F7%E9%C9&gnmkdm=N123111"})
        result=chuli(result)
        for j in result:
            if j not in result_final:
                result_final.append(j)
        print(bianhao\[i\])

    return shengchengshuju(result_final)
```

4.转换为数据库倒入语句 
转换源码
```python
    def chaxun(self,__EVENTTARGET,__EVENTARGUMENT,xn,xq,bm,TextBox1,Button2,js,headers):
        submit_post={"__EVENTTARGET":__EVENTTARGET,"__EVENTARGUMENT":__EVENTARGUMENT,"__VIEWSTATE":self.__VIEWSTATE,"xn":xn,"xq":xq,"bm":bm,"TextBox1":TextBox1,"Button2":Button2,"js":js}
        html=s.post("http://192.168.100.136/jstjkbcx.aspx?xh="+self.user+"&xm="+self.name+"&gnmkdm=N123111",submit_post,headers=headers).text
        html=html.replace('selected="selected" ',"")
        return html
    def chaxunxueyuan(self,xueyuan):

        html=self.chaxun("bm","","2015-2016","1",xueyuan,"","","030000451",{'Referer':"http://192.168.100.136/jstjkbcx.aspx?xh=201501060225&xm=%CD%F5%E8%F7%E9%C9&gnmkdm=N123111"})
        bianhao=re_jiaoshibianhao.findall(html)
        result=[]
        result_final=[]
        for i in range(len(bianhao)):
            result=self.chaxun("","","2015-2016","1",xueyuan,bianhao[i],"查询教师".encode('gb2312'),bianhao[i],{'Referer':"http://192.168.100.136/jstjkbcx.aspx?xh=201501060225&xm=%CD%F5%E8%F7%E9%C9&gnmkdm=N123111"})
            result=chuli(result)
            for j in result:
                if j not in result_final:
                    result_final.append(j)
            print(bianhao[i])

        return shengchengshuju(result_final)
```


转换后得到的结果
```sql
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-311室",9,4,1,"数据库管理系统","陈欣","数学与应用数学(金融数学与金融工程)2014","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-311室",10,4,1,"数据库管理系统","陈欣","数学与应用数学(金融数学与金融工程)2014","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-311室",11,4,1,"数据库管理系统","陈欣","数学与应用数学(金融数学与金融工程)2014","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-311室",12,4,1,"数据库管理系统","陈欣","数学与应用数学(金融数学与金融工程)2014","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-311室",13,4,1,"数据库管理系统","陈欣","数学与应用数学(金融数学与金融工程)2014","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-311室",14,4,1,"数据库管理系统","陈欣","数学与应用数学(金融数学与金融工程)2014","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-311室",15,4,1,"数据库管理系统","陈欣","数学与应用数学(金融数学与金融工程)2014","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-311室",16,4,1,"数据库管理系统","陈欣","数学与应用数学(金融数学与金融工程)2014","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-311室",17,4,1,"数据库管理系统","陈欣","数学与应用数学(金融数学与金融工程)2014","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-311室",18,4,1,"数据库管理系统","陈欣","数学与应用数学(金融数学与金融工程)2014","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-308室",9,1,3,"数据库管理系统","陈欣","数学与应用数学(金融数学与金融工程)2014","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-308室",10,1,3,"数据库管理系统","陈欣","数学与应用数学(金融数学与金融工程)2014","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-308室",11,1,3,"数据库管理系统","陈欣","数学与应用数学(金融数学与金融工程)2014","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-308室",12,1,3,"数据库管理系统","陈欣","数学与应用数学(金融数学与金融工程)2014","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-308室",13,1,3,"数据库管理系统","陈欣","数学与应用数学(金融数学与金融工程)2014","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-308室",14,1,3,"数据库管理系统","陈欣","数学与应用数学(金融数学与金融工程)2014","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-308室",15,1,3,"数据库管理系统","陈欣","数学与应用数学(金融数学与金融工程)2014","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-308室",16,1,3,"数据库管理系统","陈欣","数学与应用数学(金融数学与金融工程)2014","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-308室",17,1,3,"数据库管理系统","陈欣","数学与应用数学(金融数学与金融工程)2014","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-308室",18,1,3,"数据库管理系统","陈欣","数学与应用数学(金融数学与金融工程)2014","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J5-511室",1,4,3,"SQL Server数据库","陈欣","软件工程2013-1,软件工程2013-2,软件工程2013-3","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J5-511室",2,4,3,"SQL Server数据库","陈欣","软件工程2013-1,软件工程2013-2,软件工程2013-3","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J5-511室",3,4,3,"SQL Server数据库","陈欣","软件工程2013-1,软件工程2013-2,软件工程2013-3","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J5-511室",4,4,3,"SQL Server数据库","陈欣","软件工程2013-1,软件工程2013-2,软件工程2013-3","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J5-511室",5,4,3,"SQL Server数据库","陈欣","软件工程2013-1,软件工程2013-2,软件工程2013-3","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J5-511室",6,4,3,"SQL Server数据库","陈欣","软件工程2013-1,软件工程2013-2,软件工程2013-3","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J5-511室",7,4,3,"SQL Server数据库","陈欣","软件工程2013-1,软件工程2013-2,软件工程2013-3","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J5-511室",8,4,3,"SQL Server数据库","陈欣","软件工程2013-1,软件工程2013-2,软件工程2013-3","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J5-511室",9,4,3,"SQL Server数据库","陈欣","软件工程2013-1,软件工程2013-2,软件工程2013-3","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J5-511室",10,4,3,"SQL Server数据库","陈欣","软件工程2013-1,软件工程2013-2,软件工程2013-3","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J5-511室",11,4,3,"SQL Server数据库","陈欣","软件工程2013-1,软件工程2013-2,软件工程2013-3","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J5-511室",12,4,3,"SQL Server数据库","陈欣","软件工程2013-1,软件工程2013-2,软件工程2013-3","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J5-511室",13,4,3,"SQL Server数据库","陈欣","软件工程2013-1,软件工程2013-2,软件工程2013-3","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J5-511室",1,2,5,"SQL Server数据库","陈欣","软件工程2013-1,软件工程2013-2,软件工程2013-3","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J5-511室",2,2,5,"SQL Server数据库","陈欣","软件工程2013-1,软件工程2013-2,软件工程2013-3","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J5-511室",3,2,5,"SQL Server数据库","陈欣","软件工程2013-1,软件工程2013-2,软件工程2013-3","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J5-511室",4,2,5,"SQL Server数据库","陈欣","软件工程2013-1,软件工程2013-2,软件工程2013-3","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J5-511室",5,2,5,"SQL Server数据库","陈欣","软件工程2013-1,软件工程2013-2,软件工程2013-3","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J5-511室",6,2,5,"SQL Server数据库","陈欣","软件工程2013-1,软件工程2013-2,软件工程2013-3","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J5-511室",7,2,5,"SQL Server数据库","陈欣","软件工程2013-1,软件工程2013-2,软件工程2013-3","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J5-511室",8,2,5,"SQL Server数据库","陈欣","软件工程2013-1,软件工程2013-2,软件工程2013-3","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J5-511室",9,2,5,"SQL Server数据库","陈欣","软件工程2013-1,软件工程2013-2,软件工程2013-3","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J5-511室",10,2,5,"SQL Server数据库","陈欣","软件工程2013-1,软件工程2013-2,软件工程2013-3","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J5-511室",11,2,5,"SQL Server数据库","陈欣","软件工程2013-1,软件工程2013-2,软件工程2013-3","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J5-511室",12,2,5,"SQL Server数据库","陈欣","软件工程2013-1,软件工程2013-2,软件工程2013-3","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J5-511室",13,2,5,"SQL Server数据库","陈欣","软件工程2013-1,软件工程2013-2,软件工程2013-3","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-317室",4,2,1,"程序设计基础","陈卓艳","信息管理与信息系统2015-1,信息管理与信息系统2015-2","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-317室",5,2,1,"程序设计基础","陈卓艳","信息管理与信息系统2015-1,信息管理与信息系统2015-2","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-317室",6,2,1,"程序设计基础","陈卓艳","信息管理与信息系统2015-1,信息管理与信息系统2015-2","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-317室",7,2,1,"程序设计基础","陈卓艳","信息管理与信息系统2015-1,信息管理与信息系统2015-2","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-317室",8,2,1,"程序设计基础","陈卓艳","信息管理与信息系统2015-1,信息管理与信息系统2015-2","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-317室",9,2,1,"程序设计基础","陈卓艳","信息管理与信息系统2015-1,信息管理与信息系统2015-2","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-317室",10,2,1,"程序设计基础","陈卓艳","信息管理与信息系统2015-1,信息管理与信息系统2015-2","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-317室",11,2,1,"程序设计基础","陈卓艳","信息管理与信息系统2015-1,信息管理与信息系统2015-2","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-317室",12,2,1,"程序设计基础","陈卓艳","信息管理与信息系统2015-1,信息管理与信息系统2015-2","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-317室",13,2,1,"程序设计基础","陈卓艳","信息管理与信息系统2015-1,信息管理与信息系统2015-2","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-317室",14,2,1,"程序设计基础","陈卓艳","信息管理与信息系统2015-1,信息管理与信息系统2015-2","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-317室",15,2,1,"程序设计基础","陈卓艳","信息管理与信息系统2015-1,信息管理与信息系统2015-2","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-317室",16,2,1,"程序设计基础","陈卓艳","信息管理与信息系统2015-1,信息管理与信息系统2015-2","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-317室",17,2,1,"程序设计基础","陈卓艳","信息管理与信息系统2015-1,信息管理与信息系统2015-2","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J1-112室",1,5,1,"C++面向对象程序设计","陈卓艳","信息与计算科学2014-1,信息与计算科学2014-2","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J1-112室",2,5,1,"C++面向对象程序设计","陈卓艳","信息与计算科学2014-1,信息与计算科学2014-2","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J1-112室",3,5,1,"C++面向对象程序设计","陈卓艳","信息与计算科学2014-1,信息与计算科学2014-2","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J1-112室",4,5,1,"C++面向对象程序设计","陈卓艳","信息与计算科学2014-1,信息与计算科学2014-2","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J1-112室",5,5,1,"C++面向对象程序设计","陈卓艳","信息与计算科学2014-1,信息与计算科学2014-2","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J1-112室",6,5,1,"C++面向对象程序设计","陈卓艳","信息与计算科学2014-1,信息与计算科学2014-2","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J1-112室",7,5,1,"C++面向对象程序设计","陈卓艳","信息与计算科学2014-1,信息与计算科学2014-2","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J1-112室",8,5,1,"C++面向对象程序设计","陈卓艳","信息与计算科学2014-1,信息与计算科学2014-2","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J1-112室",9,5,1,"C++面向对象程序设计","陈卓艳","信息与计算科学2014-1,信息与计算科学2014-2","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J1-112室",10,5,1,"C++面向对象程序设计","陈卓艳","信息与计算科学2014-1,信息与计算科学2014-2","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J1-112室",11,5,1,"C++面向对象程序设计","陈卓艳","信息与计算科学2014-1,信息与计算科学2014-2","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J1-112室",12,5,1,"C++面向对象程序设计","陈卓艳","信息与计算科学2014-1,信息与计算科学2014-2","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J1-112室",13,5,1,"C++面向对象程序设计","陈卓艳","信息与计算科学2014-1,信息与计算科学2014-2","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J1-112室",14,5,1,"C++面向对象程序设计","陈卓艳","信息与计算科学2014-1,信息与计算科学2014-2","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-317室",4,4,2,"程序设计基础","陈卓艳","信息管理与信息系统2015-1,信息管理与信息系统2015-2","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-317室",5,4,2,"程序设计基础","陈卓艳","信息管理与信息系统2015-1,信息管理与信息系统2015-2","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-317室",6,4,2,"程序设计基础","陈卓艳","信息管理与信息系统2015-1,信息管理与信息系统2015-2","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-317室",7,4,2,"程序设计基础","陈卓艳","信息管理与信息系统2015-1,信息管理与信息系统2015-2","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-317室",8,4,2,"程序设计基础","陈卓艳","信息管理与信息系统2015-1,信息管理与信息系统2015-2","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-317室",9,4,2,"程序设计基础","陈卓艳","信息管理与信息系统2015-1,信息管理与信息系统2015-2","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-317室",10,4,2,"程序设计基础","陈卓艳","信息管理与信息系统2015-1,信息管理与信息系统2015-2","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-317室",11,4,2,"程序设计基础","陈卓艳","信息管理与信息系统2015-1,信息管理与信息系统2015-2","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-317室",12,4,2,"程序设计基础","陈卓艳","信息管理与信息系统2015-1,信息管理与信息系统2015-2","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-317室",13,4,2,"程序设计基础","陈卓艳","信息管理与信息系统2015-1,信息管理与信息系统2015-2","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-317室",14,4,2,"程序设计基础","陈卓艳","信息管理与信息系统2015-1,信息管理与信息系统2015-2","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-317室",15,4,2,"程序设计基础","陈卓艳","信息管理与信息系统2015-1,信息管理与信息系统2015-2","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-317室",16,4,2,"程序设计基础","陈卓艳","信息管理与信息系统2015-1,信息管理与信息系统2015-2","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-317室",17,4,2,"程序设计基础","陈卓艳","信息管理与信息系统2015-1,信息管理与信息系统2015-2","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-204室",1,3,3,"C++面向对象程序设计","陈卓艳","信息与计算科学2014-1,信息与计算科学2014-2","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-204室",2,3,3,"C++面向对象程序设计","陈卓艳","信息与计算科学2014-1,信息与计算科学2014-2","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-204室",3,3,3,"C++面向对象程序设计","陈卓艳","信息与计算科学2014-1,信息与计算科学2014-2","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-204室",4,3,3,"C++面向对象程序设计","陈卓艳","信息与计算科学2014-1,信息与计算科学2014-2","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-204室",5,3,3,"C++面向对象程序设计","陈卓艳","信息与计算科学2014-1,信息与计算科学2014-2","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-204室",6,3,3,"C++面向对象程序设计","陈卓艳","信息与计算科学2014-1,信息与计算科学2014-2","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-204室",7,3,3,"C++面向对象程序设计","陈卓艳","信息与计算科学2014-1,信息与计算科学2014-2","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-204室",8,3,3,"C++面向对象程序设计","陈卓艳","信息与计算科学2014-1,信息与计算科学2014-2","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-204室",9,3,3,"C++面向对象程序设计","陈卓艳","信息与计算科学2014-1,信息与计算科学2014-2","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-204室",10,3,3,"C++面向对象程序设计","陈卓艳","信息与计算科学2014-1,信息与计算科学2014-2","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-204室",11,3,3,"C++面向对象程序设计","陈卓艳","信息与计算科学2014-1,信息与计算科学2014-2","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-204室",12,3,3,"C++面向对象程序设计","陈卓艳","信息与计算科学2014-1,信息与计算科学2014-2","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-204室",13,3,3,"C++面向对象程序设计","陈卓艳","信息与计算科学2014-1,信息与计算科学2014-2","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-204室",14,3,3,"C++面向对象程序设计","陈卓艳","信息与计算科学2014-1,信息与计算科学2014-2","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-406室",1,2,1,"面向对象程序设计(Java)","仇丽青","计算机科学与技术2014-4,数字媒体技术2014-1,数字媒体技术2014-2","调课0246");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-406室",2,2,1,"面向对象程序设计(Java)","仇丽青","计算机科学与技术2014-4,数字媒体技术2014-1,数字媒体技术2014-2","调课0246");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-406室",3,2,1,"面向对象程序设计(Java)","仇丽青","计算机科学与技术2014-4,数字媒体技术2014-1,数字媒体技术2014-2","调课0246");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-406室",5,2,1,"面向对象程序设计(Java)","仇丽青","计算机科学与技术2014-4,数字媒体技术2014-1,数字媒体技术2014-2","调课0246");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-406室",6,2,1,"面向对象程序设计(Java)","仇丽青","计算机科学与技术2014-4,数字媒体技术2014-1,数字媒体技术2014-2","调课0246");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-406室",7,2,1,"面向对象程序设计(Java)","仇丽青","计算机科学与技术2014-4,数字媒体技术2014-1,数字媒体技术2014-2","调课0246");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-406室",8,2,1,"面向对象程序设计(Java)","仇丽青","计算机科学与技术2014-4,数字媒体技术2014-1,数字媒体技术2014-2","调课0246");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-406室",9,2,1,"面向对象程序设计(Java)","仇丽青","计算机科学与技术2014-4,数字媒体技术2014-1,数字媒体技术2014-2","调课0246");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-406室",10,2,1,"面向对象程序设计(Java)","仇丽青","计算机科学与技术2014-4,数字媒体技术2014-1,数字媒体技术2014-2","调课0246");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-406室",11,2,1,"面向对象程序设计(Java)","仇丽青","计算机科学与技术2014-4,数字媒体技术2014-1,数字媒体技术2014-2","调课0246");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-406室",12,2,1,"面向对象程序设计(Java)","仇丽青","计算机科学与技术2014-4,数字媒体技术2014-1,数字媒体技术2014-2","调课0246");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-406室",13,2,1,"面向对象程序设计(Java)","仇丽青","计算机科学与技术2014-4,数字媒体技术2014-1,数字媒体技术2014-2","调课0246");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-107室",1,3,1,"Java程序设计","仇丽青","数字媒体技术2012","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-107室",2,3,1,"Java程序设计","仇丽青","数字媒体技术2012","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-107室",3,3,1,"Java程序设计","仇丽青","数字媒体技术2012","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-107室",4,3,1,"Java程序设计","仇丽青","数字媒体技术2012","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-107室",5,3,1,"Java程序设计","仇丽青","数字媒体技术2012","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-107室",6,3,1,"Java程序设计","仇丽青","数字媒体技术2012","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-107室",7,3,1,"Java程序设计","仇丽青","数字媒体技术2012","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-107室",8,3,1,"Java程序设计","仇丽青","数字媒体技术2012","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-107室",9,3,1,"Java程序设计","仇丽青","数字媒体技术2012","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-107室",10,3,1,"Java程序设计","仇丽青","数字媒体技术2012","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-107室",1,5,1,"Java程序设计","仇丽青","数字媒体技术2012","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-107室",2,5,1,"Java程序设计","仇丽青","数字媒体技术2012","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-107室",3,5,1,"Java程序设计","仇丽青","数字媒体技术2012","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-107室",4,5,1,"Java程序设计","仇丽青","数字媒体技术2012","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-107室",5,5,1,"Java程序设计","仇丽青","数字媒体技术2012","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-107室",6,5,1,"Java程序设计","仇丽青","数字媒体技术2012","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-107室",7,5,1,"Java程序设计","仇丽青","数字媒体技术2012","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-107室",8,5,1,"Java程序设计","仇丽青","数字媒体技术2012","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-107室",9,5,1,"Java程序设计","仇丽青","数字媒体技术2012","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-107室",10,5,1,"Java程序设计","仇丽青","数字媒体技术2012","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-406室",1,4,3,"面向对象程序设计(Java)","仇丽青","计算机科学与技术2014-4,数字媒体技术2014-1,数字媒体技术2014-2","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-406室",3,4,3,"面向对象程序设计(Java)","仇丽青","计算机科学与技术2014-4,数字媒体技术2014-1,数字媒体技术2014-2","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-406室",5,4,3,"面向对象程序设计(Java)","仇丽青","计算机科学与技术2014-4,数字媒体技术2014-1,数字媒体技术2014-2","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-406室",7,4,3,"面向对象程序设计(Java)","仇丽青","计算机科学与技术2014-4,数字媒体技术2014-1,数字媒体技术2014-2","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-406室",9,4,3,"面向对象程序设计(Java)","仇丽青","计算机科学与技术2014-4,数字媒体技术2014-1,数字媒体技术2014-2","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-406室",11,4,3,"面向对象程序设计(Java)","仇丽青","计算机科学与技术2014-4,数字媒体技术2014-1,数字媒体技术2014-2","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-406室",2,4,5,"面向对象程序设计(Java)","仇丽青","计算机科学与技术2014-4,数字媒体技术2014-1,数字媒体技术2014-2","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-406室",4,4,5,"面向对象程序设计(Java)","仇丽青","计算机科学与技术2014-4,数字媒体技术2014-1,数字媒体技术2014-2","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-406室",6,4,5,"面向对象程序设计(Java)","仇丽青","计算机科学与技术2014-4,数字媒体技术2014-1,数字媒体技术2014-2","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-406室",8,4,5,"面向对象程序设计(Java)","仇丽青","计算机科学与技术2014-4,数字媒体技术2014-1,数字媒体技术2014-2","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-406室",10,4,5,"面向对象程序设计(Java)","仇丽青","计算机科学与技术2014-4,数字媒体技术2014-1,数字媒体技术2014-2","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-406室",12,4,5,"面向对象程序设计(Java)","仇丽青","计算机科学与技术2014-4,数字媒体技术2014-1,数字媒体技术2014-2","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-415室",1,3,1,"SQL Server数据库","崔宾阁","计算机科学与技术2013-3,计算机科学与技术2013-4","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-415室",2,3,1,"SQL Server数据库","崔宾阁","计算机科学与技术2013-3,计算机科学与技术2013-4","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-415室",3,3,1,"SQL Server数据库","崔宾阁","计算机科学与技术2013-3,计算机科学与技术2013-4","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-415室",4,3,1,"SQL Server数据库","崔宾阁","计算机科学与技术2013-3,计算机科学与技术2013-4","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-415室",5,3,1,"SQL Server数据库","崔宾阁","计算机科学与技术2013-3,计算机科学与技术2013-4","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-415室",6,3,1,"SQL Server数据库","崔宾阁","计算机科学与技术2013-3,计算机科学与技术2013-4","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-415室",7,3,1,"SQL Server数据库","崔宾阁","计算机科学与技术2013-3,计算机科学与技术2013-4","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-415室",8,3,1,"SQL Server数据库","崔宾阁","计算机科学与技术2013-3,计算机科学与技术2013-4","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-415室",9,3,1,"SQL Server数据库","崔宾阁","计算机科学与技术2013-3,计算机科学与技术2013-4","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-415室",10,3,1,"SQL Server数据库","崔宾阁","计算机科学与技术2013-3,计算机科学与技术2013-4","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-305室",1,5,1,"SQL Server数据库","崔宾阁","计算机科学与技术2013-3,计算机科学与技术2013-4","调课0139");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-305室",2,5,1,"SQL Server数据库","崔宾阁","计算机科学与技术2013-3,计算机科学与技术2013-4","调课0139");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-305室",4,5,1,"SQL Server数据库","崔宾阁","计算机科学与技术2013-3,计算机科学与技术2013-4","调课0139");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-305室",5,5,1,"SQL Server数据库","崔宾阁","计算机科学与技术2013-3,计算机科学与技术2013-4","调课0139");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-305室",6,5,1,"SQL Server数据库","崔宾阁","计算机科学与技术2013-3,计算机科学与技术2013-4","调课0139");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-305室",7,5,1,"SQL Server数据库","崔宾阁","计算机科学与技术2013-3,计算机科学与技术2013-4","调课0139");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-305室",8,5,1,"SQL Server数据库","崔宾阁","计算机科学与技术2013-3,计算机科学与技术2013-4","调课0139");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-305室",9,5,1,"SQL Server数据库","崔宾阁","计算机科学与技术2013-3,计算机科学与技术2013-4","调课0139");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-305室",10,5,1,"SQL Server数据库","崔宾阁","计算机科学与技术2013-3,计算机科学与技术2013-4","调课0139");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-407室",2,1,2,"SQL Server数据库","崔宾阁","计算机科学与技术2013-3,计算机科学与技术2013-4","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-407室",4,1,2,"SQL Server数据库","崔宾阁","计算机科学与技术2013-3,计算机科学与技术2013-4","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-407室",6,1,2,"SQL Server数据库","崔宾阁","计算机科学与技术2013-3,计算机科学与技术2013-4","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-407室",8,1,2,"SQL Server数据库","崔宾阁","计算机科学与技术2013-3,计算机科学与技术2013-4","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-407室",10,1,2,"SQL Server数据库","崔宾阁","计算机科学与技术2013-3,计算机科学与技术2013-4","");
INSERT INTO kechengbiao (location,zhoushu,xingqi,jieci,kecheng,laoshi,banji,huanke) VALUES("J7-305室",3,1,3,"SQL Server数据库","崔宾阁","计算机科学与技术2013-3,计算机科学与技术2013-4","");
```

二、数据库的构建 
这里采用的是mysql的数据库 建立两个表： 
1、kechengbiao 这个表储存课表信息 
[![屏幕快照 2015-11-24 下午8.37.16](/images/old/2015/11/屏幕快照-2015-11-24-下午8.37.16.png)](/images/old/2015/11/屏幕快照-2015-11-24-下午8.37.16.png) 
2、lou 这个表储存一栋楼有哪些教室，方便写后续php对整栋楼的查询 
[![屏幕快照 2015-11-24 下午8.38.46](/images/old/2015/11/屏幕快照-2015-11-24-下午8.38.46.png)](/images/old/2015/11/屏幕快照-2015-11-24-下午8.38.46.png) 
三、PHP查询接口的编写
这里查询的大体思路为：先获取该教室该周的全部课程，然后求补集（即空自习室），然后后面按条件封装一些查询函数。最后将得到的结果以JSON的格式输出（方便java程序的处理） 
这里为了方便后期维护写了4个php 
1.config.php: 
配置数据库信息
```PHP
<?php
if (!defined("DB_HOST")) {
define("DB_HOST","localhost");
define("DB_USER","root");
define("DB_PWD","root");
define("DB_PORT","3306");
define("DB_database","isdust");
}
?>
```
2.database.php：
连接数据库
```PHP
<?php
require ("config.php");
try {
    $mysql = new PDO("mysql:host=" . DB_HOST . ";port=" . DB_PORT . ";dbname=" . DB_database, DB_USER, DB_PWD);
    $mysql->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    $mysql->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);
    $mysql->exec("SET NAMES 'utf8'");
}
catch(Exception $e) {
    echo "could not connect to the database";
    exit;
}
?>
```
3.function.php: 查询函数的编写
```PHP
<?php
function chaxun_anzhou($arg_location,$arg_zhoushu){//按星期查询
	require("database.php");	
	$prepare = $mysql->prepare("SELECT * FROM kechengbiao where `location`=:location AND `zhoushu`=:zhoushu1");
	$prepare->bindParam(':location', $arg_location);
	$prepare->bindParam(':zhoushu1', $arg_zhoushu);
	$prepare->execute();
	$result = $prepare->fetchAll(PDO::FETCH_ASSOC);
	$quanji = array();
	$len_result=count($result,0);
	if($len_result==0){
	return json_encode($quanji);
			}
	//定义7*5二元坐标
	for ($i=0; $i < 7; $i++) { 
		for ($j=0; $j <5 ; $j++) { 
			$linshi['location']=$arg_location;
			$linshi['zhoushu']=$arg_zhoushu;
			$linshi['xingqi']=$i+1;
			$linshi['jieci']=$j+1;
			array_push($quanji, $linshi);
		}
	}
	//定义7*5二元坐标
	//排除有课项目
	for ($i=0; $i < $len_result; $i++) { 
		$len_quanji=count($quanji,0);
		for ($j=0; $j <$len_quanji ; $j++) { 
			if ($quanji[$j]['xingqi']==$result[$i]['xingqi'] AND $quanji[$j]['jieci']==$result[$i]['jieci'] ) {
				array_splice($quanji,$j,1,0);
				continue;		}
		}
	}
	//排除有课项目
	//生成结果
	$len_quanji=count($quanji,0);
	$final = array();
	for ($i=0; $i < $len_quanji; $i++) { 
		if ($quanji[$i]!=0) {
				array_push($final, $quanji[$i]);
		}
	}
	//生成结果
	return json_encode($final);
}
function chaxun_anxingqi($arg_location,$arg_zhoushu,$arg_xingqi){//具体到天查询
	$chaxun_anzhou=json_decode(chaxun_anzhou($arg_location,$arg_zhoushu),true);
	$len=count($chaxun_anzhou,0);
	$final = array();
	for ($i=0; $i < $len; $i++) { 
			if ($arg_xingqi==$chaxun_anzhou[$i]['xingqi']) {
				array_push($final, $chaxun_anzhou[$i]);
			}
	}
	return json_encode($final);
}
function chaxun_anlou($arg_building,$arg_zhoushu,$arg_xingqi){//按教学楼，周数，星期
	require("database.php");	
	$result_building = json_decode(getclassroom($arg_building),true);
	$len_result_building =count($result_building);
	$final=array();
	for ($i=0; $i <$len_result_building ; $i++) { 
		$temp=json_decode(chaxun_anxingqi($result_building[$i]['classroom'],$arg_zhoushu,$arg_xingqi),true);
		$len_temp=count($temp);
		for ($j=0; $j <$len_temp ; $j++) { 
				array_push($final, $temp[$j]);
			}
	}
	return json_encode($final);
}
function chaxun_anlou_jieci($arg_building,$arg_zhoushu,$arg_xingqi,$arg_jieci){//精确到节次
	$chaxun_anlou=json_decode(chaxun_anlou($arg_building,$arg_zhoushu,$arg_xingqi),true);
	//var_dump($chaxun_anlou);
	$len_chaxun_anlou=count($chaxun_anlou);
	$final=array();
	for ($i=0; $i <$len_chaxun_anlou ; $i++) { 
		if ($arg_jieci==$chaxun_anlou[$i]['jieci']) {
			array_push($final, $chaxun_anlou[$i]);
		}
	}
	return json_encode($final);
}
function getclassroom($arg_building){
	require("database.php");
	$prepare = $mysql->prepare("SELECT * FROM `lou` WHERE `building`=:building");
	$prepare->bindParam(':building', $arg_building);
	$prepare->execute();
	$result_building = $prepare->fetchAll(PDO::FETCH_ASSOC);
	return json_encode($result_building);
}
//echo chaxun_anlou_jieci("J1",7,3,2);
?>
```

4.chaxun_old.php:
查询时的接口

```PHP
<?php
require("function.php");
@$get_building=$_GET['building'];
@$get_location=$_GET['location'];
@$get_zhoushu=$_GET['zhoushu'];
@$get_xingqi=$_GET['xingqi'];
@$get_jieci=$_GET['jieci'];
@$get_method=$_GET['method'];
//0:查询某间教室在某周有空自习室，所需参数:location、zhoushu
//1:查询某栋楼有哪些教室，所需参数:building
//2:查询某间教室在某周的哪一天有自习室，所需参数:location、zhoushu、xingqi
//3:查询某栋楼在某周的哪一天有自习室，所需参数:building、zhoushu、xingqi
//4:查询某栋楼在某周的哪一天哪一节次有自习室:building、zhoushu、xingqi、jieci
if(!isset($get_method)){
	exit;
}
if ($get_method==0) {
	echo chaxun_anzhou($get_location,$get_zhoushu);
	exit;
}
if ($get_method==1) {
	echo getclassroom($get_building);
	exit;
}
if ($get_method==2 ){
	echo chaxun_anxingqi($get_location,$get_zhoushu,$get_xingqi);
	exit;
}
if ($get_method==3){
	echo chaxun_anlou($get_building,$get_zhoushu,$get_xingqi);
	exit;
}
if ($get_method==4){
	echo chaxun_anlou_jieci($get_building,$get_zhoushu,$get_xingqi,$get_jieci);
	exit;
}
?>
```

最后对编写对接口进行测试。
比如我要查询J7教学楼第七周，星期三，第五、六节课的空自习室 
就这样访问我的接口：
> http://kzxs.isdust.com/chaxun_old.php?method=4&building=J7&zhoushu=7&xingqi=3&jieci=3

最后得到如图结果：
[![屏幕快照 2015-11-24 下午9.43.59](/images/old/2015/11/屏幕快照-2015-11-24-下午9.43.59.png)](/images/old/2015/11/屏幕快照-2015-11-24-下午9.43.59.png) 

四、查询接口的加密 
为了防止接口被别人恶意调用，以及接口被恶意攻击(这种查询比较占服务器资源)，所以我对接口进行了加密。这里加密的算法使用的是RSA非对称加密算法。这里我们用到了openssl。
1.生成2048位的rsa私钥
```bash
openssl genrsa -out rsa_private 2048
```
2.由生成的私钥来生成公钥
```bash
openssl rsa -in rsa\_private -pubout -out rsa\_public
```
3.将生产的私钥放入config.php中，在config.php中插入
```PHP
define("private_key", '-----BEGIN RSA PRIVATE KEY-----
MIIEpAIBAAKCAQEAxaRFC/BJqlBO1aW5S4us1SnFNZ6qEa3n/P6VKK/um0AQ8q5y
ysxAeAhsn1Bo9C0X431RrIIFoXsUppzvICWju3BLQiwRFHt7PPagjbcPQd579vNc
Nuv7jUi+S4dIM+Fjrk5rIY0Am0bOwKKcr1h9Hb5HUCFJXd/Emc5lYBZo6TMy1tPL
QaZ33R72ybTOgLAUuosFvQ3IxvJPLtowgMiyIUEWu3fh84XQOOkqOQ7Bcrcm3y6I
gxaxRHPjT46wAt6S2pnjzjJ34KeXUP8x0FFjrkTEDl2cLdUubjoCtrA4ukKOoHuD
VyhZRj4CYXmJVLEIilE0+aZlwclNOqCPNLyOsQIDAQABAoIBAQCw6iKEVUsbkVeA
FyCOZzEGfqVxId3KhYksBhcunI1Rmz+QfGd08PCkgaX51dic+eBwWjVJ3fl8WthZ
bBEBDbBKkHJNgXSoiP//yiRdtoeJxsXggGcDIqnCBmOQ6D/RcOfxl3B+T+FDHVbl
SKpIq0UT4sejCqjJxwwNQZutL2Ipm34Rj6RNhmrdDt9qWgmd65IKqo+hpWVwlHxK
pgIL3xS5wtpm490V64gMWTpC6WKTFq2yaDvunAUCyoKRGZZKc7awHm4DjzVG8A82
VAcaInFyXxDcv5IDtln1f1C3jj/Tsy/wDy0p7fSW2g7NoCcj8vPZb/Lq9hOasxLL
uOqwwfuhAoGBAPke2zhfAyIf/8HTHzWq5I+l46t2JblB3CctAMo9Kvs0x+4ks2wE
pmlhNrjp09e7XfdqiP7k3EWhrp7RwiPqQaS15Zftkus2jLZ+qcaxAr7kXxzy1zCq
pidxu91AoLXfW+FGJWu9ppKDkldOMYHP4Y7/IrotBkm4PafU1kfSE0xfAoGBAMsZ
fIui4RcYBZAcEnSHOSyo3UeU1xAoNzr3rh/pMUeFI7bFw8evpZBINWYM2Vk8fgNB
BdQWbQZvWWezVXg23y+MnGz2zbuOvyQZ/bvp4xpqqJRy1bUf7lkUVMjz6wg9grZG
nZnzhyi71YBhhU/NCBDcwFFHH2ZttcJg9M6WTv7vAoGBAJpaMf3lcK2OIgtX4jiA
YAlZAY1VMN5uHhfv3FNyPtVSyKWW+8xrvSgB4cQErQs3vmr0CVnVN121ZdploOJb
3LxPL6hIvQUb0WepZ0wClO7t1Li9BfPTaAt8fqgByRGnCOi1a64r3a9d8ihB/I6v
3NOa5UtxZjn6+8inKPVrBiYFAoGAIZZHaHg5LS6FzP03eBnctKwAXBQbNMrRx2iq
XRCdW6yC6XjvFZjQknm+iu/ZCc7dMACSzC4hPY0whdu8aLL6WcyxGbv+7eN/bKL3
uRnGutmko1gSS2/KZOTd2JWt6qDxet9WtNz3Hx9hAWgfOcE4ckFvdIGEidXe1xRd
p8Rnr/UCgYAtQwpSTkP+pKvMBRWsfyKmdi8dxwCSI3y6PrTEH7pVd9FdjSkVKSCM
e3SYMl/Sx8fnmPfrKcWEOY/APyV7Nur5GUHwMZ/AU6KuoQPnNzeFxi1Jx79cw9QU
6ETIsCOaviU5CekdAtwyDLSx6BuAcz2ytyFvOrZW1LUitPHPYpFRZw==
-----END RSA PRIVATE KEY-----');
```
  3.在function.php中加入加密算法的函数
```PHP
function public_key_decrypt($public_key_encrypt){
	require("config.php");
	$pi_key =  openssl_pkey_get_private(private_key);
	openssl_private_decrypt(base64_decode($public_key_encrypt),$decrypt,$pi_key);
	return $decrypt;
}
function public_key_encrypt($data){
	require("config.php");
	$pu_key = openssl_pkey_get_public(public_key);//这个函数可用来判断公钥是否是可用的 
	openssl_public_encrypt($data,$encrypted,$pu_key);//私钥加密  
	$encrypted = base64_encode($encrypted);
	return $encrypted;
}
function private_key_encrypt($data){
	require("config.php");
	$pi_key =  openssl_pkey_get_private(private_key);
	openssl_private_encrypt($data,$encrypted,$pi_key);//私钥加密  
	$encrypted = base64_encode($encrypted);
	echo $data;
	echo strlen($data);
	return $encrypted;
}
```
4.将chaxun.php的头部GET接收参数改为
```PHP
header("Content-type: text/html; charset=utf-8"); 
require("function.php");
$time_server=time();
@$data=$_POST['data'];
@$time1=$_POST['time'];
@$verification=$_POST['verification'];
if(empty($data)){
	echo "参数非法";
	return;
}
if ($verification!=md5($data."dsfwedsdv".$time1)) {
	echo "参数非法";
	return;
}
if (abs($time_server-$time1)>=600) {
	echo "参数非法";
	return;
}
$json_decode=json_decode(public_key_decrypt($data),true);
@$time=$json_decode['time'];
@$key=$json_decode['key'];
@$id=$json_decode['id'];
if ($json_decode==NULL) {
	echo  "参数非法";
	return;
}
if (md5($id.md5_extra.$time)!=$key) {
	echo "参数非法";
	return;
}
if (abs($time_server-$time)>=600) {
	echo "参数非法";
	return;
}
//以上代码为验证
@$get_building=$json_decode['building'];
@$get_location=$json_decode['location'];
@$get_zhoushu=$json_decode['zhoushu'];
@$get_xingqi=$json_decode['xingqi'];
@$get_jieci=$json_decode['jieci'];
@$get_method=$json_decode['method'];
```
五、在java中封装查询空自习的类 程序调用上述编写的接口，得到json格式的数据，然后将格式解析成数组，最后返回给UI调用 
以下是核心代码
```java
   public ScheduleInformation[] jiexi(String text){//将PHP返回的信息处理
        String zhuanhuan=convert(text);
        try {
            mJSONArray=new JSONArray(zhuanhuan);
            int len=mJSONArray.length();
            mScheduleInformations =new ScheduleInformation[len];
            for (int i=0;i<len;i++){
                JSONObject obj = mJSONArray.getJSONObject(i);
                mScheduleInformations[i]=new ScheduleInformation(obj.getString("location"),obj.getInt("zhoushu"),obj.getInt("xingqi"),obj.getInt("jieci"));
            }
        }catch (Exception e){
            System.out.println(e);
        }
        return mScheduleInformations;
    }
    public ScheduleInformation[] getEmptyClassroom(String building, int schooldate, int week, int jieci) throws IOException {//按教室获取整周课程表
        String id= Settings.Secure.getString(mContext.getContentResolver(), Settings.Secure.ANDROID_ID);
        long time = System.currentTimeMillis()/1000;
        String md5=id+"wzq123"+time;
        md5=Networklogin_CMCC.md5(md5);
        String submit_pre="{\"time\":"+time+",\"key\":\""+md5+"\",\"id\":\""+id+"\",\"building\":\""+building+"\",\"location\":\"\",\"zhoushu\":\""+schooldate+"\",\"xingqi\":\""+week+"\",\"jieci\":\""+jieci+"\",\"method\":4}";
        String submit="";
        try {
            submit=RSACryptUtil.encryptByPublicKey_string(submit_pre,publickey);
        } catch (Exception e) {
            e.printStackTrace();
        }
        submit=submit.replace("==","");
        String text=mHttp.post_string("http://kzxs.isdust.com/chaxun_new.php","data="+submit+"&verification="+Networklogin_CMCC.md5(submit+"dsfwedsdv"+time)+"&time="+time);
 
//        String text=mHttp.get_string("http://kzxs.isdust.com/chaxun.php?method=4&building="+building+"&zhoushu="+ schooldate +"&xingqi="+week+"&jieci="+jieci);
        ScheduleInformation[]result=jiexi(text);
 
        return result;
    }
```

六、功能的成功实现
[![phone3](/images/old/2015/11/phone3.png)](/images/old/2015/11/phone3.png)
